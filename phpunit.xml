<?xml version="1.0" encoding="UTF-8"?>
<phpunit xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="https://schema.phpunit.de/12.0/phpunit.xsd"
         bootstrap="test/bootstrap.php"
         colors="true"
         stopOnFailure="false"
         cacheDirectory="tmp/phpunit-cache">

	<testsuites>
		<testsuite name="Application Tests">
			<!-- Only collect real PHPUnit tests -->
			<directory suffix="Test.php">test</directory>
			<directory suffix="Test.php">plugin/*/test</directory>
		</testsuite>
	</testsuites>

	<source>
		<include>
			<!-- Application source -->
			<directory suffix=".php">src</directory>

			<!-- Plugin source (no glob here, keep it robust) -->
			<directory suffix=".php">plugin</directory>
		</include>

		<exclude>
			<!-- Exclude tests from being treated as source -->
			<directory suffix=".php">test</directory>
			<directory suffix=".php">plugin/*/test</directory>

			<!-- Exclude typical noise -->
			<directory suffix=".php">vendor</directory>
			<directory suffix=".php">plugin/*/vendor</directory>
			<directory suffix=".php">tmp</directory>
			<directory suffix=".php">public</directory>
			<directory suffix=".php">docs</directory>

			<!-- Exclude templates if plugins ship PHP templates -->
			<directory suffix=".php">plugin/*/tpl</directory>
		</exclude>
	</source>

	<php>
		<env name="DEBUG" value="1"/>
	</php>
</phpunit>
